{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the Emirates Law Hub application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user.",
          "format": "email"
        },
        "firstName": {
          "type": "string",
          "description": "First name of the user."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the user."
        },
        "registrationDate": {
          "type": "string",
          "description": "Date and time the user registered.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "email",
        "firstName",
        "lastName",
        "registrationDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profile information. Path-based ownership ensures only the authenticated user can access their data.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user (same as request.auth.uid)."
            }
          ]
        }
      }
    ],
    "reasoning": "This Firestore structure prioritizes authorization independence and simplifies security rules.  It leverages path-based ownership for user data and avoids `get()` calls in security rules by denormalizing authorization information when needed. The segregation of user data into a dedicated collection also allows for simple, robust security rules and supports the required QAPs. Specifically, the structure ensures authorization independence by using the `/users/{userId}` path for user-specific data, eliminating the need for hierarchical authorization checks. The use of path-based ownership (`/users/{userId}`) makes the security rules clear and enforceable, ensuring that users can only access their own data. This also supports QAPs, as list operations are inherently secure within the user's path, since rules can easily restrict access based on `request.auth.uid` without needing to filter data based on content."
  }
}